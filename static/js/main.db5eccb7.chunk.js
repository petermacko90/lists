(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(t,e,n){t.exports=n(41)},29:function(t,e,n){},31:function(t,e,n){},33:function(t,e,n){},35:function(t,e,n){},37:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i),o=n(15),a=n.n(o),r=n(6),l=n(9),c=n(18),d=n(19),u=n(1),m={lists:[],currentList:null},h={items:[],currentItems:[]},p=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t,function(t,e){return"modified"===t?new Date(e):e})}catch(e){return}},f=function(t){return!t.replace(/\s+/g,"")};function w(t,e,n){var i;return function(){var s=this,o=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||t.apply(s,o)},e),a&&t.apply(s,o)}}var I=p(),L=Object(l.c)({listsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"FETCH_LISTS":return Object(u.a)({},t,{lists:e.payload});case"SET_CURRENT_LIST":return Object(u.a)({},t,{currentList:e.payload});case"EDIT_LIST":var n=t.lists.map(function(t){return t.id===e.payload.id?Object(u.a)({},t,e.payload):t});return Object(u.a)({},t,{lists:n,currentList:Object(u.a)({},t.currentList,e.payload)});case"DELETE_LIST":return Object(u.a)({},t,{lists:t.lists.filter(function(t){return t.id!==e.payload}),currentList:null});case"ADD_LIST_WITH_ID":var i={id:e.payload.nextId,title:e.payload.title,modified:e.payload.modified};return Object(u.a)({},t,{lists:t.lists.concat(i),currentList:i});default:return t}},itemsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"FETCH_ITEMS":return Object(u.a)({},t,{items:e.payload});case"SET_CURRENT_ITEMS":return Object(u.a)({},t,{currentItems:t.items.filter(function(t){return t.list_id===e.payload})});case"DELETE_ITEM":return Object(u.a)({},t,{items:t.items.filter(function(t){return t.id!==e.payload}),currentItems:t.currentItems.filter(function(t){return t.id!==e.payload})});case"TOGGLE_ITEM":var n=t.items.map(function(t){return t.id!==e.payload.itemId?t:Object(u.a)({},t,t.checked=!e.payload.checked)}),i=t.currentItems.map(function(t){return t.id!==e.payload.itemId?t:Object(u.a)({},t,t.checked=!e.payload.checked)});return Object(u.a)({},t,{currentItems:i,items:n});case"ADD_ITEM_WITH_ID":var s={list_id:e.payload.listId,id:e.payload.nextId,name:e.payload.name,checked:!1};return Object(u.a)({},t,{items:t.items.concat(s),currentItems:t.currentItems.concat(s)});case"ADD_LIST_WITH_ID":return Object(u.a)({},t,{currentItems:[]});case"DELETE_LIST":return Object(u.a)({},t,{items:t.items.filter(function(t){return t.list_id!==e.payload}),currentItems:t.currentItems.filter(function(t){return t.list_id!==e.payload})});default:return t}}}),b=Object(l.d)(L,I,Object(l.a)(function(t){return function(e){return function(n){if("ADD_ITEM"===n.type){var i=t.getState().itemsReducer.items.reduce(function(t,e){return t.id>e.id?t.id:e.id},0);t.dispatch({type:"ADD_ITEM_WITH_ID",payload:{listId:n.payload.listId,name:n.payload.name,nextId:i+1}})}if("ADD_LIST"===n.type){var s=t.getState().listsReducer.lists.reduce(function(t,e){return t.id>e.id?t.id:e.id},0);t.dispatch({type:"ADD_LIST_WITH_ID",payload:{title:n.payload.title,nextId:s+1,modified:n.payload.modified}})}e(n)}}},d.a,c.logger));b.subscribe(w(function(){!function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(n){console.log("localStorage saveState error: "+n)}}({listsReducer:{lists:b.getState().listsReducer.lists},itemsReducer:{items:b.getState().itemsReducer.items}})},1e3));var g=b,E=(n(29),n(3)),y=n(4),v=n(7),T=n(5),S=n(8),k=function(t){var e=t.newListTitle,n=t.isShowAddListInput,o=t.onChangeNewListTitle,a=t.onClickAddList,r=t.onKeyPressAddList,l=t.addListRef;return s.a.createElement(i.Fragment,null,s.a.createElement("button",{type:"button",onClick:a,className:"white b--none ph3 ph4-ns pv3 b pointer bg-green hover-bg-dark-green mv3 w-40 w-auto-ns"},"Add list"),n&&s.a.createElement("input",{type:"text",value:e,onChange:o,onKeyPress:r,placeholder:"List title",className:"pa3 b--none mv3 w-60 w-auto-ns",maxLength:"50",ref:l}))},C=(n(31),function(t){function e(){var t;return Object(E.a)(this,e),(t=Object(v.a)(this,Object(T.a)(e).call(this))).onClickAddList=function(e){return function(){t.handleAddList(e)}},t.onKeyPressAddList=function(e){return function(n){"Enter"===n.key&&t.handleAddList(e)}},t.handleAddList=function(e){if(t.props.isShowAddListInput){if(f(e))return void t.props.hideAddListInput();t.props.scrollToCurrentList(),t.props.onAddList(e),t.setState({newListTitle:""})}else t.props.showAddListInput()},t.onChangeNewListTitle=function(e){t.setState({newListTitle:e.target.value})},t.addList=s.a.createRef(),t.state={newListTitle:""},t}return Object(S.a)(e,t),Object(y.a)(e,[{key:"componentDidUpdate",value:function(){this.props.isShowAddListInput&&this.props.isShowNavItems&&this.addList.current.focus()}},{key:"render",value:function(){var t=this.state.newListTitle;return s.a.createElement("nav",{className:"flex flex-column flex-row-ns bg-yellow shadow-2 mb2"},s.a.createElement("h1",{className:"flex-column flex-row-ns f2 pa3 mv0"},"Lists"),this.props.isShowNavItems&&s.a.createElement("div",{className:"flex-column flex-row-ns mh3 mh0-ns"},s.a.createElement(k,{newListTitle:t,isShowAddListInput:this.props.isShowAddListInput,onChangeNewListTitle:this.onChangeNewListTitle,onClickAddList:this.onClickAddList(t),onKeyPressAddList:this.onKeyPressAddList(t),addListRef:this.addList})),this.props.isShowToggleButton&&s.a.createElement("button",{type:"button",onClick:this.props.toggleNavigation,className:"b--none pa3 ma3 pointer absolute right-0 bg-transparent","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"bar db bg-black"}),s.a.createElement("span",{className:"bar db bg-black"}),s.a.createElement("span",{className:"bar db bg-black"})))}}]),e}(i.Component)),N=Object(r.b)(null,function(t){return{onAddList:function(e){return t(function(t){return{type:"ADD_LIST",payload:{title:t,modified:new Date}}}(e))}}})(C),A=(n(33),function(t){var e=t.list,n=t.items,i=t.onClickList,o=t.onEnterList;return s.a.createElement("div",{className:"pa2 ma3 bg-yellow pointer shadow-3 noselect list",tabIndex:"0",onClick:i(e,e.id),onKeyPress:o(e,e.id)},s.a.createElement("h3",{className:"f3-l f4-m f5 truncate"},e.title),s.a.createElement("p",null,e.modified.toLocaleDateString()),s.a.createElement("p",{className:"truncate"},n.slice(0,5).map(function(t){return s.a.createElement("span",{key:t.id},"- ",t.name," ")})))}),D=(n(35),function(t){function e(){var t,n;Object(E.a)(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(n=Object(v.a)(this,(t=Object(T.a)(e)).call.apply(t,[this].concat(s)))).onClickList=function(t,e){return function(){n.handleSelectList(t,e)}},n.onEnterList=function(t,e){return function(i){"Enter"===i.key&&n.handleSelectList(t,e)}},n.handleSelectList=function(t,e){n.props.onSetCurrentList(t),n.props.onSetCurrentItems(e),n.props.scrollToCurrentList()},n}return Object(S.a)(e,t),Object(y.a)(e,[{key:"componentDidMount",value:function(){this.props.onRequestLists(),this.props.onRequestItems()}},{key:"render",value:function(){var t=this,e=this.props,n=e.lists,o=e.items,a=e.isShowLists,r=e.showLists,l=e.hideLists,c=[],d=[];return n.forEach(function(e){o.forEach(function(t){e.id===t.list_id&&(d=d.concat(t))}),c=c.concat(s.a.createElement(A,{key:e.id,list:e,items:d,onClickList:t.onClickList,onEnterList:t.onEnterList})),d=[]}),s.a.createElement("div",{className:"fl w-25-l w-third-m w-100"},a?s.a.createElement("button",{type:"button",onClick:l,className:"bg-yellow b--none pointer pv1 ml3 mv1 toggle-lists"},"Hide lists \u25b2"):s.a.createElement("button",{type:"button",onClick:r,className:"bg-yellow b--none pointer pv1 ml3 mv1 toggle-lists"},"Show lists \u25bc"),s.a.createElement("div",{className:"lists ".concat(a?"":"dn")},c.length>0?s.a.createElement(i.Fragment,null,c,s.a.createElement("hr",{className:"dn-ns moon-gray"})):s.a.createElement("p",{className:"ml3"},"No lists found")))}}]),e}(i.Component)),O=Object(r.b)(function(t){return{lists:t.listsReducer.lists,items:t.itemsReducer.items}},function(t){return{onRequestLists:function(){return t(function(t){t({type:"FETCH_LISTS",payload:void 0===p()?[]:p().listsReducer.lists})})},onRequestItems:function(){return t(function(t){t({type:"FETCH_ITEMS",payload:void 0===p()?[]:p().itemsReducer.items})})},onSetCurrentList:function(e){return t(function(t){return{type:"SET_CURRENT_LIST",payload:t}}(e))},onSetCurrentItems:function(e){return t({type:"SET_CURRENT_ITEMS",payload:e})}}})(D),_=function(t){var e=t.id,n=t.listId,i=t.checked,o=t.name,a=t.onClick,r=t.onClickDelete,l=t.onKeyPress;return s.a.createElement("li",{className:"noselect"+(i?" checked":""),tabIndex:"0",onKeyUp:l(n,e,i),onClick:a(n,e,i)},o,s.a.createElement("span",{className:"close",title:"Delete item",onClick:r(n,e)},"\xd7"))},j=function(t){var e=t.listId,n=t.newItemName,i=t.onSetNewItemName,o=t.onClickAddItem,a=t.onKeyPressAddItem;return s.a.createElement("div",{className:"mt3"},s.a.createElement("input",{type:"text",value:n,onChange:i,onKeyPress:a(e,n),placeholder:"Item name",maxLength:"100",className:"pa3 b--none w-100 w-70-m w-auto-l"}),s.a.createElement("button",{type:"button",onClick:o(e,n),className:"white b--none ph4 pv3 mt3 mt0-ns b pointer bg-green hover-bg-dark-green w-30-m w-auto-l"},"Add"))},R=(n(37),function(t){function e(){var t;return Object(E.a)(this,e),(t=Object(v.a)(this,Object(T.a)(e).call(this))).focusEditTitle=function(){t.editTitle.current.focus()},t.hideEditTitle=function(){t.setState({isEditTitle:!1,newListTitle:""})},t.showEditTitle=function(){t.setState({isEditTitle:!0,newListTitle:t.props.list.title},function(){return t.focusEditTitle()})},t.onChangeListTitle=function(e){t.setState({newListTitle:e.target.value})},t.onClickEditTitle=function(e,n){return function(){t.handleEditTitle(e,n)}},t.onKeyPressEditTitle=function(e,n){return function(i){"Enter"===i.key&&t.handleEditTitle(e,n)}},t.handleEditTitle=function(e,n){f(n)||(t.props.onEditList(e,n,new Date),t.setState({newListTitle:"",isEditTitle:!1}))},t.handleDeleteList=function(e){return function(){window.confirm("Are you sure you want to delete this list?")&&(t.props.onDeleteList(e),t.hideEditTitle(),t.setState({newItemName:""}),t.props.showLists())}},t.onClickDeleteItem=function(e,n){return function(i){i.stopPropagation(),t.handleDeleteItem(e,n)}},t.onClickItem=function(e,n,i){return function(){t.handleToggleItem(e,n,i)}},t.onKeyPressItem=function(e,n,i){return function(s){"Delete"===s.key?t.handleDeleteItem(e,n):"Enter"===s.key&&t.handleToggleItem(e,n,i)}},t.handleDeleteItem=function(e,n){window.confirm("Are you sure you want to delete this item?")&&(t.props.onDeleteItem(n),t.props.onEditList(e,t.props.list.title,new Date))},t.handleToggleItem=function(e,n,i){t.props.onToggleItem(n,i),t.props.onEditList(e,t.props.list.title,new Date)},t.onClickAddItem=function(e,n){return function(){t.handleAddItem(e,n)}},t.onKeyPressAddItem=function(e,n){return function(i){"Enter"===i.key&&t.handleAddItem(e,n)}},t.handleAddItem=function(e,n){f(n)||(t.props.onAddItem(e,n),t.props.onEditList(e,t.props.list.title,new Date),t.setState({newItemName:""}))},t.onChangeNewItemName=function(e){t.setState({newItemName:e.target.value})},t.editTitle=s.a.createRef(),t.state={isEditTitle:!1,newListTitle:"",newItemName:""},t}return Object(S.a)(e,t),Object(y.a)(e,[{key:"componentDidUpdate",value:function(t){t.list||this.props.list||this.props.list.id===t.list.id||this.hideEditTitle()}},{key:"render",value:function(){var t=this,e=this.props,n=e.list,o=e.items,a=this.state,r=a.isEditTitle,l=a.newListTitle,c=a.newItemName;return n?s.a.createElement("div",{className:"fl w-75-l w-two-thirds-m w-100 pa3"},s.a.createElement("button",{type:"button",onClick:this.handleDeleteList(n.id),className:"white b--none ph4 pv3 b pointer bg-red hover-bg-dark-red"},"Delete list"),r?s.a.createElement(i.Fragment,null,s.a.createElement("button",{type:"button",onClick:this.onClickEditTitle(n.id,l),className:"white b--none ph4 pv3 b pointer bg-green hover-bg-dark-green"},"Save title"),s.a.createElement("button",{type:"button",onClick:this.hideEditTitle,className:"white b--none ph4 pv3 b pointer bg-blue hover-bg-dark-blue"},"Don't save title")):s.a.createElement("button",{type:"button",onClick:this.showEditTitle,className:"white b--none ph4 pv3 b pointer bg-blue hover-bg-dark-blue"},"Edit title"),r?s.a.createElement("input",{type:"text",value:l,onChange:this.onChangeListTitle,onKeyPress:this.onKeyPressEditTitle(n.id,l),placeholder:"List title",className:"pa3 b--none mv4 db",maxLength:"50",ref:this.editTitle}):s.a.createElement("h2",{className:"f2 mv4",style:{minHeight:"50.4px",overflowWrap:"break-word"}},n.title),s.a.createElement("p",null,n.modified.toLocaleDateString()),s.a.createElement("ul",null,o.length>0?o.map(function(e){return s.a.createElement(_,{key:e.id,id:e.id,listId:n.id,checked:e.checked,name:e.name,onClick:t.onClickItem,onClickDelete:t.onClickDeleteItem,onKeyPress:t.onKeyPressItem})}):s.a.createElement("p",null,"No items")),s.a.createElement(j,{listId:n.id,newItemName:c,onSetNewItemName:this.onChangeNewItemName,onClickAddItem:this.onClickAddItem,onKeyPressAddItem:this.onKeyPressAddItem})):null}}]),e}(i.Component)),x=Object(r.b)(function(t){return{list:t.listsReducer.currentList,items:t.itemsReducer.currentItems}},function(t){return{onEditList:function(e,n,i){return t(function(t,e,n){return{type:"EDIT_LIST",payload:{id:t,title:e,modified:n}}}(e,n,i))},onDeleteList:function(e){return t(function(t){return{type:"DELETE_LIST",payload:t}}(e))},onDeleteItem:function(e){return t(function(t){return{type:"DELETE_ITEM",payload:t}}(e))},onToggleItem:function(e,n){return t(function(t,e){return{type:"TOGGLE_ITEM",payload:{itemId:t,checked:e}}}(e,n))},onAddItem:function(e,n){return t(function(t,e){return{type:"ADD_ITEM",payload:{listId:t,name:e}}}(e,n))}}})(R),P=function(){return s.a.createElement("div",{className:"ma3 tc",style:{clear:"both"}},"Icons made by ",s.a.createElement("a",{href:"https://www.flaticon.com/authors/smashicons",title:"Smashicons"},"Smashicons")," from ",s.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")," is licensed by ",s.a.createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank",rel:"noopener noreferrer"},"CC 3.0 BY"))},W=function(t){function e(){var t;return Object(E.a)(this,e),(t=Object(v.a)(this,Object(T.a)(e).call(this))).onWindowResize=function(){var e=window.innerWidth;e!==t.state.windowWidth&&(t.setState({windowWidth:e}),e>=480?t.setState({isShowToggleButton:!1,isShowNavItems:!0,isShowAddListInput:!1,isShowLists:!0}):t.setState({isShowToggleButton:!0,isShowNavItems:!1,isShowAddListInput:!0}))},t.toggleNavigation=function(){t.setState({isShowNavItems:!t.state.isShowNavItems})},t.showAddListInput=function(){return t.setState({isShowAddListInput:!0})},t.hideAddListInput=function(){return t.setState({isShowAddListInput:!1})},t.scrollToCurrentList=function(){t.state.windowWidth<480&&(t.hideLists(),t.setState({isShowNavItems:!1}))},t.showLists=function(){return t.setState({isShowLists:!0})},t.hideLists=function(){return t.setState({isShowLists:!1})},t.state={isShowLists:!0,isShowToggleButton:!0,isShowNavItems:!1,isShowAddListInput:!0,windowWidth:0},t}return Object(S.a)(e,t),Object(y.a)(e,[{key:"componentDidMount",value:function(){window.addEventListener("resize",w(this.onWindowResize,250)),this.onWindowResize()}},{key:"render",value:function(){var t=this.state,e=t.isShowLists,n=t.isShowToggleButton,o=t.isShowNavItems,a=t.isShowAddListInput;return s.a.createElement(i.Fragment,null,s.a.createElement(N,{isShowToggleButton:n,isShowNavItems:o,isShowAddListInput:a,toggleNavigation:this.toggleNavigation,showAddListInput:this.showAddListInput,hideAddListInput:this.hideAddListInput,scrollToCurrentList:this.scrollToCurrentList}),s.a.createElement(O,{isShowLists:e,showLists:this.showLists,hideLists:this.hideLists,scrollToCurrentList:this.scrollToCurrentList}),s.a.createElement(x,{showLists:this.showLists}),s.a.createElement(P,null))}}]),e}(i.Component),K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}n(39);a.a.render(s.a.createElement(r.a,{store:g},s.a.createElement(W,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/lists",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/lists","/service-worker.js");K?(function(t,e){fetch(t).then(function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):M(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):M(e,t)})}}()}},[[20,2,1]]]);
//# sourceMappingURL=main.db5eccb7.chunk.js.map